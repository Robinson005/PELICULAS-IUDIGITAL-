<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Películas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .form-group button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #0056b3;
        }
        .item {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestión de Películas</h1>
        
        <div class="form-group">
            <label for="titulo">Título</label>
            <input type="text" id="titulo">
        </div>
        <div class="form-group">
            <label for="sinopsis">Sinopsis</label>
            <textarea id="sinopsis"></textarea>
        </div>
        <div class="form-group">
            <label for="url_pelicula">URL de la Película</label>
            <input type="text" id="url_pelicula">
        </div>
        <div class="form-group">
            <label for="imagen_portada">Imagen de Portada</label>
            <input type="text" id="imagen_portada">
        </div>
        <div class="form-group">
            <label for="año_estreno">Año de Estreno</label>
            <input type="number" id="año_estreno">
        </div>
        <div class="form-group">
            <label for="genero">Género Principal</label>
            <select id="genero"></select>
        </div>
        <div class="form-group">
            <label for="director">Director Principal</label>
            <select id="director"></select>
        </div>
        <div class="form-group">
            <label for="productora">Productora</label>
            <select id="productora"></select>
        </div>
        <div class="form-group">
            <label for="tipo">Tipo</label>
            <select id="tipo"></select>
        </div>
        <div class="form-group">
            <button onclick="addMedia()">Agregar Película</button>
        </div>

        <h2>Lista de Películas</h2>
        <div id="media-list"></div>
    </div>

    <script>
        const apiUrl = 'http://localhost:3000';

        async function fetchOptions(endpoint, selectId) {
            const response = await fetch(`${apiUrl}/${endpoint}`);
            const data = await response.json();
            const select = document.getElementById(selectId);
            data.forEach(item => {
                const option = document.createElement('option');
                option.value = item._id;
                option.textContent = item.nombre || item.nombres;
                select.appendChild(option);
            });
        }

        async function fetchMedia() {
            const response = await fetch(`${apiUrl}/media`);
            const medias = await response.json();
            const mediaList = document.getElementById('media-list');
            mediaList.innerHTML = '';
            medias.forEach(media => {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <h3>${media.titulo}</h3>
                    <p>${media.sinopsis}</p>
                    <p><strong>URL:</strong> <a href="${media.url_pelicula}" target="_blank">${media.url_pelicula}</a></p>
                    <p><strong>Año de Estreno:</strong> ${media.año_estreno}</p>
                    <button onclick="deleteMedia('${media._id}')">Eliminar</button>
                `;
                mediaList.appendChild(div);
            });
        }

        async function addMedia() {
            const titulo = document.getElementById('titulo').value;
            const sinopsis = document.getElementById('sinopsis').value;
            const urlPelicula = document.getElementById('url_pelicula').value;
            const imagenPortada = document.getElementById('imagen_portada').value;
            const añoEstreno = document.getElementById('año_estreno').value;
            const genero = document.getElementById('genero').value;
            const director = document.getElementById('director').value;
            const productora = document.getElementById('productora').value;
            const tipo = document.getElementById('tipo').value;

            const response = await fetch($,{apiUrl}/medias, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    titulo,
                    sinopsis,
                    url_pelicula: urlPelicula,
                    imagen_portada: imagenPortada,
                    año_estreno: añoEstreno,
                    genero_principal: genero,
                    director_principal: director,
                    productora,
                    tipo
                })
            });

            await fetchMedia();
        }

        async function deleteMedia(id) {
            const response = await fetch(`${apiUrl}/media/${id}`, { method: 'DELETE' });
            await fetchMedia();
        }

        fetchOptions('generos', 'genero');
        fetchOptions('directores', 'director');
        fetchOptions('productoras', 'productora');
        fetchOptions('tipos', 'tipo');
        fetchMedia();
    </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aplicación de películas</title>
</head>
<body>
  <div id="root"></div>
  <script src="index.js"></script>
</body>
</html>